# üîÆ –°–∫–∞–Ω–µ—Ä –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏—è - Telegram Bot

Telegram –±–æ—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø–æ –ú–µ—Ç–∞-–ú–µ—Ç–æ–¥—É Natalie Zemskova —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GPT-4o.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –ø–æ –ú–µ—Ç–∞-–ú–µ—Ç–æ–¥—É —á–µ—Ä–µ–∑ 5-—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º –∏ —Ñ–æ–Ω–æ–º
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ PostgreSQL
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –°–±–æ—Ä –¥–∞—Ç–∞—Å–µ—Ç–∞ –¥–ª—è fine-tuning GPT
- ‚úÖ –ì–ª—É–±–∏–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞ 7-10 –º–∏–Ω—É—Ç (–∫–∞–∫ —É —ç–∫—Å–ø–µ—Ä—Ç–∞)
- ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è (–±–∞–±—É—à–∫–∞/–ø—Ä–∞–±–∞–±—É—à–∫–∞ –ø–æ –º–∞–º–∏–Ω–æ–π/–ø–∞–ø–∏–Ω–æ–π –ª–∏–Ω–∏–∏)
- ‚úÖ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç—ã —á–∞–∫—Ä —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- ‚úÖ –§–µ–º–∏–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—Ä–∞–∑ (—è –Ω–µ –¥–æ—Å—Ç–æ–∏–Ω/–¥–æ—Å—Ç–æ–π–Ω–∞)

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
bot_with_db.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ metamethod_analyzer.py  # 5-—à–∞–≥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ GPT-4o
‚îú‚îÄ‚îÄ pdf_generator_with_background.py  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å —Ñ–æ–Ω–æ–º
‚îú‚îÄ‚îÄ database.py             # –†–∞–±–æ—Ç–∞ —Å PostgreSQL
‚îú‚îÄ‚îÄ cost_calculator.py      # –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
‚îî‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git)
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/DaniilLepekhin/Natalie-Zemskova.git
cd Natalie-Zemskova
```

### 2. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL
```bash
# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
createdb metamethod_bot

# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É (–µ—Å–ª–∏ –µ—Å—Ç—å)
psql -d metamethod_bot -f schema.sql
```

### 4. –°–æ–∑–¥–∞—Ç—å config.py
```python
TELEGRAM_TOKEN = "your_telegram_bot_token"
OPENAI_API_KEY = "your_openai_api_key"
OPENAI_MODEL = "gpt-4o"

# PostgreSQL
DB_HOST = "localhost"
DB_NAME = "metamethod_bot"
DB_USER = "postgres"
DB_PASSWORD = "your_password"
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
```bash
python3 bot_with_db.py
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```bash
source venv/bin/activate
python3 show_cost_stats.py
```

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ SQL
```bash
psql -d metamethod_bot -c "SELECT COUNT(*) as analyses, ROUND(CAST(SUM(api_cost_usd) AS numeric), 4) as total_cost FROM analyses WHERE api_cost_usd IS NOT NULL;"
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `analyses`
- –í—Å–µ –∞–Ω–∞–ª–∏–∑—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- –¢–æ–∫–µ–Ω—ã –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –¢–∞–±–ª–∏—Ü–∞ `photos`
- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ base64
- –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏ fine-tuning GPT

### –¢–∞–±–ª–∏—Ü–∞ `users`
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üîß –î–µ–ø–ª–æ–π (systemd)

–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å:
```bash
sudo nano /etc/systemd/system/natalie-bot.service
```

```ini
[Unit]
Description=Natalie Zemskova Meta-Method Telegram Bot
After=network.target postgresql.service

[Service]
Type=simple
User=root
WorkingDirectory=/opt/Natalie_Zemskova
ExecStart=/opt/Natalie_Zemskova/venv/bin/python3 /opt/Natalie_Zemskova/bot_with_db.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
sudo systemctl daemon-reload
sudo systemctl enable natalie-bot
sudo systemctl start natalie-bot
sudo systemctl status natalie-bot
```

## üìà –ü—Ä–æ–≥–Ω–æ–∑ —Ä–æ—Å—Ç–∞ –ë–î

| –ê–Ω–∞–ª–∏–∑–æ–≤ | –†–∞–∑–º–µ—Ä –ë–î |
|----------|-----------|
| 1,000    | ~55 MB    |
| 10,000   | ~550 MB   |
| 100,000  | ~5.5 GB   |

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [COST_TRACKING_README.md](COST_TRACKING_README.md) - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ API
- [QUICK_START.md](QUICK_START.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [cost_stats.sql](cost_stats.sql) - SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## ü§ñ –ë–æ—Ç

- **Username**: @skanermetalizabot
- **–ú–æ–¥–µ–ª—å**: GPT-4o
- **–ê–Ω–∞–ª–∏–∑**: 5-—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: ~$0.08-0.12 –∑–∞ –∞–Ω–∞–ª–∏–∑

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

Private - —Ç–æ–ª—å–∫–æ –¥–ª—è Natalie Zemskova

## üë§ –ê–≤—Ç–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è Natalie Zemskova
